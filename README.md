# rese

## アプリケーション名
 Rese

## 概要説明
登録した飲食店を検索、お気に入り登録、予約を行うことができるアプリケーション
管理者も予約確認、来店すみかどうかをチェックできます
![home](/src/storage/picture/home.jpg)



## 作成した目的
ある企業のグループ会社の飲食予約サービスの依頼を受けたため

## アプリケーションURL


## 他のリポジトリ
Git HubのReseアプリケーションに全てのファイルが含まれています

## 機能一覧
会員登録
ログイン
ログアウト
ユーザー飲食店お気に入り一覧閲覧
ユーザー飲食店予約情報確認
飲食店一覧取得
飲食店詳細閲覧
飲食店お気に入り追加
飲食店お気に入り削除
飲食店予約情報追加
飲食店予約情報削除
エリアで検索する
ジャンルで検索する
店名で検索する
会員にメール一括送信
リマインダーメール送信
飲食店管理
アプリケーション管理



## 使用技術（実行環境）
PHP 8.2.9
Laravel 8.83.8
MySQL 8.1.0
Nginx 1.22.1
Mailcatcher

## テーブル設計
![table](/src/storage/picture/table.jpg)

## ER図
![ER](/src/storage/picture/ER.jpg)

## 環境構築

#### プロジェクトのセットアップ手順
#### ディレクトリの作成
アプリケーションの作成をするため、開発環境を GitHub からクローンしてください。

#### Docker の設定
Docker の設定をしてください。
```
$ docker-compose up -d --build
```

#### Laravel のパッケージのインストール
PHPコンテナ内にログイン後、以下にて必要なパッケージをインストールしてください。
```
$ docker-compose exec php bash
$ composer install
```

#### バリデーションの実行
PHPコンテナ内で以下を実行し、バリデーションを実行してください。

#### laravel/uiパッケージをインストール
Auth::routes()を使用するためにlaravel/uiパッケージをインストールしてください
途中のauth/login.blade.php、auth/register.blade.phpは全てNoにしてください。

1. composer requireを実行
composer require laravel/ui
2. 認証スキャフォールドを生成
php artisan ui bootstrap --auth

#### Mailcatherのインストール
mailcatcherを以下にてインストールして下さい
gem install mailcatcher


#### スケジューラーの送信設定
スケジューラーの送信設定を行うため、以下を実行して下さい。
apt-get update 
apt-get install cron
apt-get install vim 

ここで、下記文を加えてください。
0 0 * * * cd /（場所を追加して下さい）/rese && php artisan schedule:run >> /var/log/laravel-schedule.log 2>&1
場所を追加してくださいとコメントがある部分に今回ダウンロードしたReseアプリの保存場所を記載ください。

また、上記文は、分、時間、日、月、曜日を設定し、リマインダーメールを設定することができます。
例では、毎日０時０分に送信することになっています。


## 他に工夫した点や苦労した点
・お気に入り登録、予約を行う時にはログインが必須です。 
・Sign up、管理者画面からのメール送信、リマインダー時にメールアドレスの確認が入りますが、開発環境でのサーバーを用いているため実際にメールは送られることはありません。 　
以下URLにて実際にメールが送受信されているかを確認してください。 　
http://localhost:1080/ 

・顧客がレビューを送れるようにするには、Shop管理者画面から来店済みにする必要があります。
・Shop管理者画面で店側が来店済みにした場合、顧客はMypageの過去の予約の部分から、レビューとして点数とコメントを送ることができます。
・顧客がStripeを用いて支払いを行う場合、Shop管理者画面から金額を入力する必要があります。金額が入力された場合、Mypageの予約編集画面に支払いボタンが出てきて、支払うことができます。
・Stripeでの支払いは、本アプリケーションは開発環境ですので、下記カード情報にて認証を得ることができます。
例
番号：4242 4242 4242 4242
期限：12/34
CVC：123
・Shop管理者画面から掲載情報の編集、登録者への一斉メールを送ることができます。
・予約者には当日にリマインダーメールが送信されます。
・顧客予約編集画面にQRコードが出ますが、情報がそのまま出ます。
・アプリケーション管理者画面から、Shop管理者を追加することができます。これは既存で存在する登録アカウントに管理者権限を付与するシステムになっています。
・既に登録されているアカウントの一例として以下のアカウントがあります。 　
またSeederから複数の予約が入るようになっています。

メールアドレス：a@email.com
パスワード：testtest
※Shop No.3の管理者です

メールアドレス：b@email.com
パスワード：testtest
※アプリケーション管理者兼、Shop No.6の管理者です

メールアドレス：c@email.com
パスワード：testtest
※Shop No.8の管理者です

メールアドレス：d@email.com
パスワード：testtest

メールアドレス：e@email.com
パスワード：testtest